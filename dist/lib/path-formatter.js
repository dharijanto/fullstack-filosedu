var path=require("path"),fs=require("fs"),md5=require("md5"),Promise=require("bluebird"),AppConfig=require(path.join(__dirname,"../app-config"));class PathFormatter{static hashAsset(r,e){var a=null;return a="cms"===r?path.join(AppConfig.VIEWS_CMS_PATH,e):path.join(AppConfig.VIEWS_APP_PATH,e),new Promise((r,i)=>fs.readFile(a,(a,t)=>{a?i(a):r(e+"?hash="+md5(t))}))}}module.exports=PathFormatter;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9saWIvcGF0aC1mb3JtYXR0ZXIuanMiXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJmcyIsIm1kNSIsIlByb21pc2UiLCJBcHBDb25maWciLCJqb2luIiwiX19kaXJuYW1lIiwiUGF0aEZvcm1hdHRlciIsIltvYmplY3QgT2JqZWN0XSIsInR5cGUiLCJtb3VudFBhdGgiLCJhc3NldFBhdGgiLCJWSUVXU19DTVNfUEFUSCIsIlZJRVdTX0FQUF9QQVRIIiwicmVzb2x2ZSIsInJlamVjdCIsInJlYWRGaWxlIiwiZXJyIiwiY29udGVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLEtBQU9DLFFBQVEsUUFFZkMsR0FBS0QsUUFBUSxNQUNiRSxJQUFNRixRQUFRLE9BQ2RHLFFBQVVILFFBQVEsWUFFbEJJLFVBQVlKLFFBQVFELEtBQUtNLEtBQUtDLFVBQVcsd0JBRTdDQyxjQUtFQyxpQkFBa0JDLEVBQU1DLEdBQ3RCLElBQUlDLEVBQVksS0FPaEIsT0FMRUEsRUFEVyxRQUFURixFQUNVVixLQUFLTSxLQUFLRCxVQUFVUSxlQUFnQkYsR0FFcENYLEtBQUtNLEtBQUtELFVBQVVTLGVBQWdCSCxHQUczQyxJQUFJUCxRQUFRLENBQUNXLEVBQVNDLElBQ3BCZCxHQUFHZSxTQUFTTCxFQUFXLENBQUNNLEVBQUtDLEtBQzlCRCxFQUNGRixFQUFPRSxHQUVQSCxFQUFRSixFQUFZLFNBQVdSLElBQUlnQixRQU83Q0MsT0FBT0MsUUFBVWIiLCJmaWxlIjoibGliL3BhdGgtZm9ybWF0dGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJylcblxudmFyIGZzID0gcmVxdWlyZSgnZnMnKVxudmFyIG1kNSA9IHJlcXVpcmUoJ21kNScpXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJylcblxudmFyIEFwcENvbmZpZyA9IHJlcXVpcmUocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2FwcC1jb25maWcnKSlcblxuY2xhc3MgUGF0aEZvcm1hdHRlciB7XG4gIC8qXG4gICAgdHlwZSAoU1RSSU5HKTogbWVhbiBpdCBkZWZpbmUgZWl0aGVyIGl0cyBmb3IgYXBwIG9yIGNtc1xuICAgIG1vdW50UGF0aCAoU1RSSU5HKTogbWVhbiBpdHMgcGF0aCB0byB0aGUgY29ycmVzcG9uZGVuY3kgZmlsZVxuICAqL1xuICBzdGF0aWMgaGFzaEFzc2V0ICh0eXBlLCBtb3VudFBhdGgpIHtcbiAgICB2YXIgYXNzZXRQYXRoID0gbnVsbFxuICAgIGlmICh0eXBlID09PSAnY21zJykge1xuICAgICAgYXNzZXRQYXRoID0gcGF0aC5qb2luKEFwcENvbmZpZy5WSUVXU19DTVNfUEFUSCwgbW91bnRQYXRoKVxuICAgIH0gZWxzZSB7XG4gICAgICBhc3NldFBhdGggPSBwYXRoLmpvaW4oQXBwQ29uZmlnLlZJRVdTX0FQUF9QQVRILCBtb3VudFBhdGgpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJldHVybiBmcy5yZWFkRmlsZShhc3NldFBhdGgsIChlcnIsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJlamVjdChlcnIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShtb3VudFBhdGggKyAnP2hhc2g9JyArIG1kNShjb250ZW50KSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUGF0aEZvcm1hdHRlclxuIl19
