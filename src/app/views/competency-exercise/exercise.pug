extends ../layout/index.pug

append head
  link(rel="stylesheet" href="/assets/css/exercise-style.css")
  style.
    #notes {
      background-color: #ffc800;
      padding: 1%;
    }

block contents
    #leaderboard.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
      .modal-dialog(role='document')
        .modal-content
          .modal-header
            h4#exampleModalLabel.modal-title.text-center Ranking
              button.close(type='button', data-dismiss='modal', aria-label='Close')
                span(aria-hidden='true') Ã—
          .modal-body#leaderboard-content
          .modal-footer
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close

    .container
      .row
        .col-md-2.col-sm-4.col-xs-4(style="position:fixed")
          .thumbnail.text-center
            //.progress#progressBar
              .progress-bar.progress-bar-info.progress-bar-striped.active(role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%;")
            .timer-count
              span#timer
            //.timer-text(style="font-size: 0.75em")
              if idealTime > 0
                span#targetTime(style="{color: black !important}") Goal: #[strong #{idealTime} detik]
            .timer-text(style="font-size: 0.75em")
              span#elapsedTime(style="{color: black !important}")
            //button.btn.btn-primary#resetQuestion Ulang
      h1.text-center Uji Kompetensi
      h4.text-center Modul: #{topicName}
      .row.text-center
        p#notes.
          #[strong Catatan:]
          <br>
          Bila siswa belum mempelajari modul ini, selesaikan sebisanya atau lewati
          dengan menekan tombol "Submit" di bagian paling bawah tanpa mengisi jawaban.
      div.text-center#questionSubmit
        - var pointerIndex = 0
        each formattedExercise in formattedExercises
            //- if ((formattedExercise.renderedQuestions).length > 0)
            each renderedQuestion, index in formattedExercise.renderedQuestions
              form(name='question')
                .row.rendered-question(style="max-width: 720px; margin:auto")
                  | !{renderedQuestion}
                  for unknown in formattedExercise.unknowns[index]
                    .row.form-group(style="width:40%; margin:auto;")
                      .col-md-2
                        label.control-label(style="font-size: 150%") #{unknown}
                      .col-md-10
                        input.form-control.answerInput(name=`${unknown}` value='')
                div(class=`resultAnswer_${pointerIndex}`)
                - pointerIndex++
                br
            hr(style="height: 1px")
      div.text-center(style="margin-bottom:5%;")
        div.scoreSection
          p.hidden(id='currentScore')
          p.hidden(id='submissionError')
        a.btn.btn-primary.btn-submit-answer(href="javascript:void(0);") Submit
        a.btn.btn-primary.btn-retry.hidden(href="") Retry

append scripts
  script().
    window['elapsedTime'] = !{elapsedTime}
    window['idealTime'] = !{idealTime}
  script(src=('/assets/vendor/form-serializer/dist/jquery.serialize-object.min.js'))
  script(src="/assets/vendor/jquery-timer/timer.jquery.js")
  script(src=`${bundle}`)
