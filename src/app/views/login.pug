extends layout/index.pug

block initialization
  - const activePage = 'login'

append head
  link(rel="stylesheet" href="/assets/vendor/select2/select2.min.css")

block contents
  div.container
    .row
      .col-md-12
        form(role="form" action="/login" method="post")
          div.form-group
            #logoSchool.text-center
          div.form-group
            label School Name
            select.select2.form-control(name="schoolId")
              each val in schools
                option(value=`${val.id}` data-logo=`${val.logo}`) #{val.name}
          div.form-group
            label Username
            input(type="text" name="username" class="form-control")
          div.form-group
            label Password
            input(type="password" name="password" class="form-control")
          if error.length > 0
            .alert.alert-danger(role='alert')= error
          button(type="submit" class="btn btn-primary") SUBMIT
    .row
      .col-md-12
        | Belum memiliki account? Klik #[a(href='/register') disini] untuk register.

append scripts
  script(type="text/javascript" src="/assets/vendor/select2/select2.min.js")
  script.
    $('.select2').select2()
    $(document).ready(function (e) {
      $('select[name=schoolId]').on('change', function (e) {
        changeLogoImage($(this).find(':selected').data('logo'))
      })
      var dataLogoURL = $('select[name=schoolId]').find(':selected').data('logo')
      changeLogoImage(dataLogoURL)
    })

    function changeLogoImage (logoURL) {
      $('#logoSchool').empty()
      $('#logoSchool').append('<img src="' + logoURL + '" class="img-responsive" style="margin:0 auto;height:300px;"/>')
    }
