extends layout/index.pug

append head
  link(rel="stylesheet" href="/assets/css/exercise-style.css")

block contents
    #leaderboard.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
      .modal-dialog(role='document')
        .modal-content
          .modal-header
            h4#exampleModalLabel.modal-title.text-center Ranking
              button.close(type='button', data-dismiss='modal', aria-label='Close')
                span(aria-hidden='true') Ã—
          .modal-body#leaderboard-content
          .modal-footer
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close

    div.container
      .row
        input(type='hidden' name="createdAt" value=`${exercise.createdAt}`)
        input(type='hidden' name="idealTime" value=`${idealTime}`)
        .col-md-3.col-sm-3.col-xs-4(style="position:fixed")
          .thumbnail.text-center
            .progress#progressBar
              .progress-bar.progress-bar-info.progress-bar-striped.active(role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%;")
            .border(style="border-top: 2px dashed #ffbc49; margin-bottom:10px;")
            h4#timer
            .border(style="border-top: 2px dashed #ffbc49; margin-bottom:10px;")
            p Target:
              span#targetTime #{idealTime}
              |  Sec
            button.btn.btn-primary#resetQuestion RESET

      h1.text-center Latihan Soal
      h4.text-center #{topic.topic} - #{subtopic.subtopic}
      h4.text-center
        a.backToVideoBtn(onclick='return false;' data-exercise-id=`${exerciseId}` data-href=`/${topic.id}/${getSlug(topic.topic)}/${subtopic.id}/${getSlug(subtopic.subtopic)}`) Kembali ke Video
      h4.text-center
        button.btn.btn-primary#leaderboard-button(type='button', data-toggle='modal', data-target='#leaderboard') Lihat Ranking
      hr(style="height: 1px")
      input#exerciseId(type="hidden" name="exerciseId" value=`${exerciseId}`)

      div.text-center#questionSubmit
        each question, index in formatted.renderedQuestions
          form.QuestionSection(method="POST" onkeypress="return event.keyCode != 13;")
            .row
              | !{question}
            each unknown in formatted.unknowns[index]
              .row.form-group(style="width: 40%; margin:auto")
                .col-md-2
                  label.control-label(style="font-size: 150%") #{unknown}
                .col-md-10
                  input.form-control.answerInput(name=`${unknown}` value="")
            div(class=`resultAnswer_${index}`)
            .row
              hr(style="height: 1px")
      div.text-center(style="margin-bottom:5%;")
        div.scoreSection
          p.hidden(id='currentScore')
          p.hidden(id='submissionError')
          p.bestScore
            | !{starsHTML}
          p.bestTimer
            | !{timersHTML}
        div.rankingScore
          | !{ranking}
        button.btn.btn-primary.btn_submit_answer() Submit
        a.btn.btn-primary.btn_retry_question.hidden(href="") Retry

append scripts
  script(src=('/assets/vendor/form-serializer/dist/jquery.serialize-object.min.js'))
  script(src="/assets/vendor/jquery-timer/timer.jquery.js")
  script(src=`${bundle}`)
